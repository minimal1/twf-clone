# 1.1 레이어분리

**질문**: 왜 `terminal`, `filetree`, `state`, `views`로 패키지를 분리했을까?

**분석 포인트**:
- 각 패키지의 역할은 무엇인가?
- 패키지 간 의존성 방향은?
- 이러한 분리의 장점은?

**답**
하나의 역할에만 집중하기 위해 4개의 패키지로 분리했습니다.  

각 패키지의 역할

1. terminal (Infrastructure Layer)
  - I/O 담당 패키지로, 터미널 하드웨어/OS와의 인터페이스를 제공
  - Raw 모드, ANSI 이스케이프 시퀀스 등 저수준 터미널 제어

2. filetree (Domain Layer)
  - 핵심 도메인 패키지로, 파일 시스템 트리 구조와 순회 로직 담당
  - 비즈니스 로직을 처리

3. state (State Management Layer)
  - 어플리케이션의 런타임 상태를 중앙 집중식으로 관리
  - filetree 도메인을 "어떻게 보여줄지"에 대한 상태 관리

4. views (Presentation Layer)
  - 화면 렌더링 담당, 실제로 사용자가 보는 UI 구성


패키지 간 의존성 방향

          terminal
              ^
              |
+-------------+-------------+
|                           |
views ------------------> state ------------------> filetree
  |                                                     ^
  |                                                     |
  +-----------------------------------------------------+

의존성 방향 해석 (고수준 ->  저수준)
- views: 가장 구체적인 구현
- state: 중간 레이어 (filetree 도메인을 view를 위해 제공)
- terminal & filetree: 가장 추상적 / 독립적

분리의 장점

분리의 목적은 효과적인 이해를 위함입니다.
그 결과 얻어지는 다양한 장점이 있습니다.  
작업자가 잘 이해할 수 있다는 것은 구성 요소들의 맥락이 합리적이며 결이 같다는 걸 말합니다.  
전문 용어로 높은 응집도를 가진다는 겁니다.
자연스레 수정할 때가 같은 역할에 한에서만 이뤄지게 됩니다.  
결과적으로 역할 분리가 명확하게 되면 모듈이 쉽게 이해되며 기능 추가 및 수정이 수월해집니다.  
또한 역할 숙지를 마친 상태라면 여러 작업자들이 동시에 작업할 수 도 있습니다.  
"View, Domain, State, I/O Abstraction" 으로 분리는 개발자들의 경험을 통한 지혜라고 볼 수 있습니다.
